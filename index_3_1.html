<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Midterm Data Visualization">
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
    <script type"text/javascript" src="javascripts/d3.js"></script>
    <title>My Midterm</title>
  </head>

  <body>
    <!--Header-->
    <div id="myheader">
      <h1>Data Visualization Midterm</h1>
      <h2>Manuel Ramirez</h2>
      <h3>IE 590</h3>  
    </div>   
    <!--IndexLeft-->
    <div id="myIndex">
      <h1>Index</h1>
      <h3>3.1. Bar Chart</h3>
      <h3><a href="index_3_2.html">3.2. Stacked Bar Chart</a></h3>
      <h3><a href="index_3_3.html">3.3. Interactive Stacked Bar Chart</a></h3>
    </div>
    <!--Body-->
    <div id="myBody">
      <!--Participants Header-->
      <div id="mainDiv">
        <!--3.1. Bar Chart-->
        <h2>3.1. Bar Chart</h2>
        <script type="text/javascript">
          //Read datafile
          d3.json("https://hivelab.org/static/exam1.json",function(data){
            //Create array for number of seniors for each university
            var dataLables=Object.keys(data[0]);
            //Create array with names of universities
            var dataValues=[]
            for (i=1; i<dataLables.length;i++){
              dataValues.push(data[3][dataLables[i]])
            };
            //Create SVG
            var w=400;
            var h=400;
            var p=60;
            var svg=d3.select("#mainDiv")
                    .append("svg")
                    .attr("width", w+2*p)
                    .attr("height", h+2*p)
                    .style("background","lightcyan");
            //Create scale for Y axis
            var yScale= d3.scale.linear()
                                .domain([0,Math.max.apply(null, dataValues)])
                                .range([h,0]);
            //Create scale for X axis
            var xScale= d3.scale.quantile()
                                .domain([0,Math.max.apply(null, dataValues)])
                                .range([0,w]);
            //Create bars
            svg.selectAll("rect")
              .data(dataValues)
              .enter()
              .append("rect")
              .attr("x", function(d,i){
                return p+i*(w/dataValues.length);
              })
              .attr("y", function(d,i){
                return p+yScale(dataValues[i])
              })
              .attr("width",(w/dataValues.length)-5)
              .attr("height",function(d,i){
                return h-yScale(dataValues[i])
              })
              .attr("fill", "blue");
            //Y axis
            svg.append("g")
                .attr("class","axis")
                .attr("transform","translate("+(p-5)+","+p+")")
                .call(d3.svg.axis()
                  .scale(yScale)
                  .orient("left")
                  .ticks(5));
            //X axis
            svg.append("g")
                .attr("class","axis")
                .attr("transform","translate("+(p-5)+","+(p+h)+")")
                .call(d3.svg.axis()
                  .scale(xScale)
                  .orient("bottom")
                  .ticks(0));
            //Add axes titles
            svg.append("text")
                .attr("x",w/2+p-50)
                .attr("y",h+2*p-5)
                .attr("fill", "black")
                .attr("style","font-size:20px")
                .text(function(){return "Universities";});
            svg.append("text")
                .attr("x",-40)
                .attr("y",h/2+p)
                .attr("fill", "black")
                .attr("transform","rotate(-90,10,"+(h/2+45)+")")
                .attr("style","font-size:20px")
                .text(function(){return "Seniors";});
            //Add title to graph
            svg.append("text")
                .attr("x",p+w/2-80)
                .attr("y",30)
                .attr("fill", "black")
                .attr("style","font-size:21px")
                .text(function(){return "Number of seniors";});
          })
        </script>
      </div>
    </div>  
  </body>
</html>
